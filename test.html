<!DOCTYPE html>
<html>
<head>
    <title>Prueba de Login de Google</title>
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
    <h1>Prueba de Inicio de Sesión</h1>
    <button id="loginButton">Iniciar sesión con Google</button>
    <button id="logoutButton" style="display:none;">Cerrar sesión</button>
    <p id="status"></p>

    <script>
        // REEMPLAZA ESTO CON TU NUEVO ID DE CLIENTE
        const CLIENT_ID = '698390297082-ispr2kjc26hffaqsl4i5anffvdhu7fhc.apps.googleusercontent.com'; 

        function handleClientLoad() {
            gapi.load('client:auth2', initClient);
        }

        function initClient() {
            gapi.auth2.init({
                clientId: CLIENT_ID,
                scope: 'https://www.googleapis.com/auth/drive'
            }).then(() => {
                console.log("GAPI auth2 inicializado correctamente.");
                document.getElementById('status').innerText = 'Listo para iniciar sesión.';
                
                // Asignar eventos a los botones
                document.getElementById('loginButton').onclick = handleAuthClick;
                document.getElementById('logoutButton').onclick = handleSignoutClick;

                // Actualizar UI según el estado de login
                updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
                gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

            }).catch(error => {
                console.error("Error al inicializar GAPI auth2:", error);
                document.getElementById('status').innerText = 'Error en la inicialización. Revisa la consola.';
            });
        }

        function handleAuthClick() {
            gapi.auth2.getAuthInstance().signIn();
        }

        function handleSignoutClick() {
            gapi.auth2.getAuthInstance().signOut();
        }

        function updateSigninStatus(isSignedIn) {
            if (isSignedIn) {
                document.getElementById('loginButton').style.display = 'none';
                document.getElementById('logoutButton').style.display = 'block';
                document.getElementById('status').innerText = '¡Sesión iniciada con éxito!';
            } else {
                document.getElementById('loginButton').style.display = 'block';
                document.getElementById('logoutButton').style.display = 'none';
                document.getElementById('status').innerText = 'Sesión cerrada.';
            }
        }

        window.onload = handleClientLoad;
    </script>
</body>
</html>